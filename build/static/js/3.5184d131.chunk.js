(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{126:function(e,t,n){e.exports={Chat:"Chat_Chat__2tOF9",header:"Chat_header__2PgHf",formWrapper:"Chat_formWrapper__OefzX",form:"Chat_form__2WpJi",textArea:"Chat_textArea__343lG"}},128:function(e,t,n){e.exports={Messages:"Messages_Messages__2gnqT"}},130:function(e,t,n){e.exports={Message:"Message_Message__2Ar8G",incomming:"Message_incomming__2Mo1l",outgoing:"Message_outgoing__3IgJI"}},132:function(e,t,n){e.exports={InfiniteProgress:"InfiniteProgress_InfiniteProgress__1eag6",dot:"InfiniteProgress_dot__1vD0k",fillDot:"InfiniteProgress_fillDot__1AeO9"}},134:function(e,t,n){e.exports={Loading:"Loading_Loading__3RoeH"}},136:function(e,t,n){e.exports={TextArea:"TextArea_TextArea__pE5GN"}},138:function(e,t,n){e.exports={CloseBtn:"CloseBtn_CloseBtn__3MTWy"}},141:function(e,t,n){"use strict";n.r(t);var a=n(8),s=n(11),r=n(13),o=n(12),i=n(14),c=n(1),u=n.n(c),l=n(30),p=n(126),h=n.n(p),m=n(35),f=n.n(m),g=n(128),d=n.n(g),b=n(130),_=n.n(b),v=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=f()(_.a.Message,this.props.user.id===this.props.item.sender_id?_.a.outgoing:_.a.incomming);return u.a.createElement("div",{className:e},this.props.item.message)}}]),t}(c.PureComponent),O=n(132),j=n.n(O);function y(){return u.a.createElement("div",{className:j.a.InfiniteProgress},u.a.createElement("i",{className:j.a.dot},"\xa0"))}var C=n(134),M=n.n(C),k=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:M.a.Loading},u.a.createElement(y,null))}}]),t}(c.PureComponent),E=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.loaded&&this.props.loading?u.a.createElement(k,null):null}}]),t}(c.PureComponent),N=Object(l.b)(function(e){return{loaded:e.chat.loaded,loading:e.chat.loading}})(E),x=function(e){function t(){var e,n;Object(a.a)(this,t);for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).setRefMessages=function(e){n.messages=e},n.onScroll=function(e){n.messages.scrollTop<100&&n.props.loadMessages()},n}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.messages.scrollTop=this.messages.scrollHeight}},{key:"getSnapshotBeforeUpdate",value:function(){return this.messages.scrollHeight-this.messages.scrollTop}},{key:"componentDidUpdate",value:function(e,t,n){this.messages.scrollTop=this.messages.scrollHeight-n}},{key:"render",value:function(){var e=f()(d.a.Messages,this.props.className);return u.a.createElement("div",{className:e,ref:this.setRefMessages,onScroll:this.onScroll},u.a.createElement(N,null),this.renderMessages())}},{key:"renderMessages",value:function(){var e=this;return this.props.messages.map(function(t){return u.a.createElement(v,{item:t,user:e.props.user,key:t.id})})}}]),t}(c.PureComponent),P=n(22),A=function(e){function t(){var e,n;Object(a.a)(this,t);for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).loadMessages=function(){n.props.chat.can_load&&!n.props.chat.loading&&n.mounted&&n.props.loadMessages()},n}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"render",value:function(){return u.a.createElement(x,{className:this.props.className,messages:this.props.messages,user:this.props.user,loadMessages:this.loadMessages})}}]),t}(c.PureComponent),w=Object(l.b)(function(e){return{messages:e.messages,user:e.user,chat:e.chat}},function(e){return{loadMessages:function(){e(Object(P.a)())}}})(A),S=n(136),T=n.n(S);function D(e){var t=e.onChange,n=e.onBlur,a=e.onKeyDown,s=e.value,r=e.link,o=e.name,i=e.placeholder,c=void 0===i?"":i;return u.a.createElement("textarea",Object.assign({className:T.a.TextArea,ref:function(e){return r&&r(e)}},{name:o,value:s,placeholder:c,onChange:t,onBlur:n,onKeyDown:a}))}var I=n(52),B=n(138),H=n.n(B);function W(e){var t=e.onClick;return u.a.createElement("button",{className:H.a.CloseBtn,onClick:t})}var J=function(e){function t(){var e,n;Object(a.a)(this,t);for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).onSend=function(e){e.preventDefault(),n.props.onSubmit(n.message.value),n.message.value=""},n.refMessage=function(e){n.message=e},n}return Object(i.a)(t,e),Object(s.a)(t,[{key:"getTitle",value:function(){var e=this;return this.props.chat.is_private?this.props.chat.users.filter(function(t){return t.id!==e.props.user.id}).map(function(e){return e.name}).join(", "):this.props.chat.name}},{key:"render",value:function(){return u.a.createElement("div",{className:h.a.Chat},u.a.createElement("div",{className:h.a.header},u.a.createElement("div",null,this.getTitle()),u.a.createElement(W,{onClick:this.props.onClose})),u.a.createElement(w,{className:h.a.messages}),u.a.createElement("div",{className:h.a.formWrapper},u.a.createElement("form",{className:h.a.form,onSubmit:this.onSend},u.a.createElement(D,{name:"message",className:h.a.textArea,link:this.refMessage}),u.a.createElement(I.a,{onClick:this.onSend},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))}}]),t}(c.PureComponent),L=function(e){function t(){var e,n;Object(a.a)(this,t);for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).onClose=function(){n.props.history.push("/chats")},n}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return console.log(this.props),u.a.createElement(J,{user:this.props.user,chat:this.props.chat,onSubmit:this.props.onSubmit,onClose:this.onClose})}}]),t}(c.PureComponent);t.default=Object(l.b)(function(e){return{user:e.user,chat:e.chat}},function(e){return{onSubmit:function(t){e(Object(P.b)(t))}}})(L)}}]);
//# sourceMappingURL=3.5184d131.chunk.js.map