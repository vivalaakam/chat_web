{"version":3,"sources":["Components/Chats/Chats.scss","Components/Chats/ChatRow.scss","Components/ChatUsers/ChatUserRow.scss","Components/Chats/ChatRow.js","Components/Chats/Chats.js","Components/ChatUsers/ChatUserRow.js","Components/ChatUsers/ChatUsers.js","Containers/ChatUsers.js","Containers/Chats.js"],"names":["module","exports","Chats","create","list","enter","enterActive","exit","exitActive","messages","ChatRow","active","title","text","ChatUserRow","ChatRowComponent","_this","this","props","chat","is_private","users","filter","u","id","user","map","name","join","link","concat","style","classnames","styles","Object","defineProperty","location","react_default","a","createElement","Link","to","className","getTitle","renderMessage","last_message","message","PureComponent","ChatsComponent","onCreate","history","push","Btn","onClick","renderChats","react_transition_group","timeout","classNames","children","_this2","chats","ChatRow_ChatRowComponent","key","_ref","onPressUser","ChatUsers","renderList","ChatUserRow_ChatUserRow","ChatUsersContainer","ChatUsers_ChatUsers","connect","state","dispatch","usersPrivateChat","Chat","loadableFactory","__webpack_require__","e","then","bind","ChatsContainer","Chats_ChatsComponent","pathname","parentPath","match","path","Switch","Route","exact","component"],"mappings":"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","file":"static/js/5.63d77ce3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Chats\":\"Chats_Chats__39dea\",\"create\":\"Chats_create__OXN5O\",\"list\":\"Chats_list__xbOHo\",\"enter\":\"Chats_enter__3mTQz\",\"enterActive\":\"Chats_enterActive__2k9I-\",\"exit\":\"Chats_exit__2MsrV\",\"exitActive\":\"Chats_exitActive__hfFrr\",\"messages\":\"Chats_messages__2Q4v_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ChatRow\":\"ChatRow_ChatRow__yk6k-\",\"active\":\"ChatRow_active__1asSn\",\"title\":\"ChatRow_title__2D0AZ\",\"text\":\"ChatRow_text__1UeQB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ChatUserRow\":\"ChatUserRow_ChatUserRow__1PBAX\",\"create\":\"ChatUserRow_create__2j3IX\"};","/**\n * Created by vivalaakam on 20.06.2018.\n *\n * @flow\n */\nimport React, { PureComponent } from 'react'\nimport classnames from 'classnames'\nimport { Link } from 'react-router-dom'\n\nimport styles from './ChatRow.scss'\n\nexport default class ChatRowComponent extends PureComponent {\n  getTitle() {\n    if (!this.props.chat.is_private) {\n      return this.props.chat.name\n    }\n\n    return this.props.chat.users.filter(u => u.id !== this.props.user.id).map(u => u.name).join(', ')\n  }\n\n  render() {\n    const link = `/chats/${this.props.chat.id}`\n    const style = classnames(styles.ChatRow, {\n      [styles.active]: link === this.props.location\n    })\n    return (\n      <Link to={link} className={style}>\n        <div className={styles.title}>{this.getTitle()}</div>\n        {this.renderMessage()}\n      </Link>\n    )\n  }\n\n  renderMessage() {\n    if (!this.props.chat.last_message) {\n      return (\n        <div className={styles.text}>Пока нет сообщений</div>\n      )\n    }\n\n    return (\n      <div className={styles.text}>{this.props.chat.last_message.message}</div>\n    )\n  }\n}\n","/**\n * Created by vivalaakam on 20.06.2018.\n *\n * @flow\n */\nimport React, { PureComponent } from 'react'\nimport { CSSTransition, TransitionGroup } from 'react-transition-group'\n\nimport styles from './Chats.scss'\nimport ChatRowComponent from './ChatRow'\nimport Btn from '../UI/Btn/Btn'\n\nexport default class ChatsComponent extends PureComponent {\n  render() {\n    return (\n      <div className={styles.Chats}>\n        <div className={styles.list}>\n          <Btn onClick={this.onCreate} className={styles.create}>\n            Новый чат\n          </Btn>\n          {this.renderChats()}\n        </div>\n        <TransitionGroup className={styles.messages}  timeout={3000}>\n          <CSSTransition classNames={{\n            enter: styles.enter,\n            enterActive: styles.enterActive,\n            exit: styles.exit,\n            exitActive: styles.enterActive,\n          }} timeout={2300}>\n            {this.props.children}\n          </CSSTransition>\n        </TransitionGroup>\n      </div>\n    )\n  }\n\n  renderChats() {\n    return this.props.chats.map(chat => (\n      <ChatRowComponent location={this.props.location} chat={chat} user={this.props.user} key={chat.id} />\n    ))\n  }\n\n  onCreate = () => {\n    this.props.history.push('/chats')\n  }\n}\n","/**\n * Created by vivalaakam on 19.01.2019.\n *\n * @flow\n */\nimport React from 'react'\nimport styles from './ChatUserRow.scss'\nimport Btn from '../UI/Btn/Btn'\n\nexport default function ChatUserRow({ user, onPressUser }) {\n  const onClick = () => {\n    onPressUser(user.id)\n  }\n\n  return (\n    <div className={styles.ChatUserRow}>\n      <span>\n        {user.name}\n      </span>\n      <Btn onClick={onClick} className={styles.create}>\n        Написать\n      </Btn>\n    </div>\n  )\n}\n","/**\n * Created by vivalaakam on 19.01.2019.\n *\n * @flow\n */\nimport React, { PureComponent } from 'react'\nimport ChatUserRow from './ChatUserRow'\n\nexport default class ChatUsers extends PureComponent {\n  render() {\n    return this.renderList()\n  }\n\n  renderList() {\n    return this.props.users.map((user) => (\n      <ChatUserRow key={user.id} user={user} onPressUser={this.props.onPressUser} />\n    ))\n  }\n}\n","/**\n * Created by vivalaakam on 19.01.2019.\n *\n * @flow\n */\nimport React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport { usersPrivateChat } from '../reducers/users'\nimport ChatUsers from '../Components/ChatUsers/ChatUsers'\n\nconst mapStateToProps = state => ({\n  users: state.users,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  onPressUser(id) {\n    dispatch(usersPrivateChat({ id }))\n  }\n})\n\nclass ChatUsersContainer extends PureComponent {\n  render() {\n    return (\n      <ChatUsers users={this.props.users} onPressUser={this.props.onPressUser} />\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatUsersContainer)\n","/**\n * Created by vivalaakam on 20.06.2018.\n *\n * @flow\n */\n\nimport React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom'\n\nimport ChatsComponent from '../Components/Chats/Chats'\nimport { loadableFactory } from '../App'\nimport ChatUsers from './ChatUsers'\n\nconst mapStateToProps = state => ({\n  user: state.user,\n  chats: state.chats\n})\n\n\nconst Chat = loadableFactory(() => import('./Chat'))\n\nclass ChatsContainer extends PureComponent {\n  render() {\n    if (!(this.props.user && this.props.user.id)) {\n      return null\n    }\n\n    return (\n      <ChatsComponent\n        user={this.props.user}\n        chats={this.props.chats}\n        history={this.props.history}\n        location={this.props.location.pathname}\n        parentPath={this.props.match.path}\n      >\n        <Switch>\n          <Route exact path={`/chats`} component={ChatUsers} />\n          <Route path={`/chats/:chatId`} component={Chat} />\n        </Switch>\n      </ChatsComponent>\n    )\n  }\n}\n\n\nexport default connect(mapStateToProps)(ChatsContainer)\n"],"sourceRoot":""}