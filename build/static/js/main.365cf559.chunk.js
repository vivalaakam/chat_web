(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(41),s=n.n(c),o=(n(75),n(60)),u=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(a.a.createElement(o.a,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");u?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):i(e)})}}()},17:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(10),s=n(39),o=n(3),u=n(18),i=n(19),l=n(6),h=n(7),f=n(12),p=n(11),d=n(13),v=new(function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(p.a)(t).call(this,"api/subscription"))}return Object(d.a)(t,e),t}(n(30).a));function b(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}var g=function(){function e(){Object(l.a)(this,e),"undefined"!==typeof navigator&&"undefined"!==typeof window&&"serviceWorker"in navigator&&"PushManager"in window&&this.run()}return Object(h.a)(e,[{key:"run",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register("".concat("","/push-worker.js"));case 3:return this.serviceWorker=e.sent,e.next=6,this.serviceWorker.pushManager.getSubscription();case 6:t=e.sent,this.hasSubscription=!(null===t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Service Worker Error",e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"subscribeUser",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.serviceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.serviceWorker.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:b("BLd2VdjhaXtdzi791fq_BMXyc-qFc8wtcChM3JcvdNuvEfHk2pvc1PCZcMEkOG85klBRss3OejxHhWq7oXKypcM")});case 5:return t=e.sent,e.prev=6,e.next=9,v.create({subscription:{subscription:JSON.stringify(t),source:"web"}});case 9:return n=e.sent,this.hasSubscription=!0,e.abrupt("return",n);case 14:e.prev=14,e.t0=e.catch(6),this.hasSubscription=!1;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(2),console.log("Failed to subscribe the user: ",e.t1);case 22:case"end":return e.stop()}},e,this,[[2,19],[6,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"unsubscribeUser",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.serviceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.serviceWorker.pushManager.getSubscription();case 4:if(!(t=e.sent)){e.next=8;break}return this.hasSubscription=!1,e.abrupt("return",t.unsubscribe());case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();g.single=new g;var O=n(22),j=n(33),k=n(24);n.d(t,"a",function(){return _}),n.d(t,"b",function(){return E}),n.d(t,"d",function(){return A}),n.d(t,"c",function(){return P}),n.d(t,"e",function(){return Q});var m=a.a.mark(C),w=a.a.mark(U),y=a.a.mark(Q),x={loaded:!1},_="USER_UPDATE",S="USER_APPLY";function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case _:return Object(c.a)({},e,r);default:return e}}var T=Object(s.a)(_),A=Object(s.a)(S);function C(e){var t,n;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,u.a.setToken(t.token),r.next=5,g.single.subscribeUser();case 5:return(n=r.sent)&&localStorage.setItem("subscription",n.data.id),r.next=9,Object(o.fork)(U);case 9:return r.next=11,Object(o.put)(T(t));case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),console.log("userApplyAction",r.t0.message);case 16:case"end":return r.stop()}},m,this,[[1,13]])}function U(){var e,t,n;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(o.select)(P);case 3:t=r.sent,e=Object(O.eventChannel)(function(e){var n=j.a.single.join("user:".concat(t.id),{});return n.on("on_chat",e),function(){j.a.single.leave(n)}});case 5:return r.next=8,Object(o.take)(e);case 8:return n=r.sent,r.next=11,Object(o.put)(Object(k.a)(n));case 11:r.next=5;break;case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),console.log("chatSubscribe",r.t0.message);case 18:return r.prev=18,e.close&&e.close(),r.finish(18);case 21:case"end":return r.stop()}},w,this,[[0,15,18,21]])}function P(e){return e.user}function Q(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.fork)(o.takeLatest,S,C);case 2:if(!u.a.getToken()){e.next=5;break}return e.next=5,Object(o.fork)(U);case 5:case"end":return e.stop()}},y,this)}},18:function(e,t,n){"use strict";var r="jwtToken";t.a={getToken:function(){return"undefined"!==typeof localStorage&&localStorage.getItem(r)},setToken:function(e){e&&(localStorage.setItem(r,e),document.cookie="Authorization=Bearer ".concat(e))},removeToken:function(){localStorage.setItem(r,null),document.cookie="Authorization="}}},24:function(e,t,n){"use strict";n.d(t,"b",function(){return j}),n.d(t,"a",function(){return m}),n.d(t,"c",function(){return y});var r=n(2),a=n.n(r),c=n(27),s=n(10),o=n(3),u=n(39),i=n(17),l=n(31),h=a.a.mark(w),f=a.a.mark(y),p=new l.a,d=[],v="CHATS_UPDATE",b="CHATS_RESET",g="CHATS_ADD";function O(e){return e.map(function(e){return Object(s.a)({},e,{last:e.last||new Date(e.last_message&&e.last_message.inserted_at||new Date(e.inserted_at))})}).sort(function(e,t){return t.last-e.last})}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case v:return function(e,t){var n=e.reduce(function(e,t){return Object(s.a)({},e,Object(c.a)({},t.id,t))},{});return n[t.id]=t,O(Object.values(n))}(e,r);case b:return O(r);case g:return O(e.concat(r));default:return e}}var k=Object(u.a)(b),m=(Object(u.a)(g),Object(u.a)(v));function w(){var e,t;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(o.select)(i.c);case 3:if(e=n.sent,!e.token){n.next=13;break}return n.next=8,p.all();case 8:return t=n.sent,n.next=11,Object(o.put)(k(t.data));case 11:n.next=15;break;case 13:return n.next=15,Object(o.put)(k([]));case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),console.log("init",n.t0.message);case 20:case"end":return n.stop()}},h,this,[[0,17]])}function y(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.fork)(w);case 2:return e.next=4,Object(o.fork)(o.takeLatest,i.a,w);case 4:case"end":return e.stop()}},f,this)}},26:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return f});var r=n(10),a=n(39),c=[],s="MESSAGES_UPDATE",o="MESSAGES_RESET";function u(e,t){if(0===t.length)return e;for(var n=t.map(function(e){return Object(r.a)({},e,{inserted_at:new Date(e.inserted_at)})}),a=e.concat(n).sort(function(e,t){return e.inserted_at-t.inserted_at}),c=a.shift(),s=a.shift(),o=[c];a.length;)s.in_block=c.sender_id===s.sender_id,o.push(s),c=s,s=a.shift();return s&&o.push(s),o}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case o:return u(c,r);case s:return u(e,r);default:return e}}var l=function(e){return e.messages},h=Object(a.a)(s),f=Object(a.a)(o)},30:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(10),a=n(2),c=n.n(a),s=n(19),o=n(6),u=n(7),i=n(18);console.log("https://vivalaakam-chat.herokuapp.com");var l=function(){function e(t){var n=this;Object(o.a)(this,e),this.url="https://vivalaakam-chat.herokuapp.com",this.getUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"".concat(n.url,"/").concat(n.base_url).concat(e,"?").concat(t):"".concat(n.url,"/").concat(n.base_url).concat(e)},this.base_url=t}return Object(u.a)(e,[{key:"create",value:function(e){return this.postQuery("".concat(this.getUrl()),e)}},{key:"update",value:function(e,t){return this.putQuery("".concat(this.getUrl(),"/").concat(e),t)}},{key:"fetch",value:function(e){return this.getQuery("".concat(this.getUrl(),"/").concat(e))}},{key:"all",value:function(){return this.getQuery("".concat(this.getUrl()))}},{key:"remove",value:function(e){return this.deleteQuery("".concat(this.getUrl(),"/").concat(e))}},{key:"getQuery",value:function(){var t=Object(s.a)(c.a.mark(function t(n){var r,a,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.a.getToken(),t.next=3,fetch(n,this.options(r));case 3:return a=t.sent,s=e.afterQuery(a),t.abrupt("return",s.json());case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"postQuery",value:function(){var t=Object(s.a)(c.a.mark(function t(n,r){var a,s,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.a.getToken(),t.next=3,fetch(n,this.options(a,{method:"POST",body:JSON.stringify(r)}));case 3:return s=t.sent,o=e.afterQuery(s),t.abrupt("return",o.json());case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"putQuery",value:function(){var t=Object(s.a)(c.a.mark(function t(n,r){var a,s,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.a.getToken(),t.next=3,fetch(n,this.options(a,{method:"PUT",body:JSON.stringify(r)}));case 3:return s=t.sent,o=e.afterQuery(s),t.abrupt("return",o.json());case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"deleteQuery",value:function(){var t=Object(s.a)(c.a.mark(function t(n){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.a.getToken(),t.next=3,fetch(n,this.options(r,{method:"DELETE"}));case 3:return a=t.sent,e.afterQuery(a),t.abrupt("return",!0);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={Authorization:"Bearer ".concat(e),"Content-Type":"application/json"};return Object(r.a)({headers:n,mode:"cors",credentials:"include"},t)}}],[{key:"handleError",value:function(){var e=Object(s.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:throw n=e.sent,new Error(n.message);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"afterQuery",value:function(t){return t.ok?t:e.handleError(t)}}]),e}()},31:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(6),a=n(7),c=n(12),s=n(11),o=n(13),u=n(30),i=n(37),l=n.n(i),h=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).call(this,"api/chats"))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"messages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.getQuery(this.getUrl("/".concat(e,"/messages"),l.a.stringify({last_message:t})))}},{key:"message",value:function(e,t){return this.postQuery("".concat(this.getUrl(),"/").concat(e,"/message"),{message:{message:t}})}}]),t}(u.a)},33:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(6),a=n(7),c=n(49),s=n(18),o=function(){function e(){Object(r.a)(this,e),this._socket=null,this._connections=[]}return Object(a.a)(e,[{key:"connect",value:function(){if(!this._socket){var e=s.a.getToken();this._socket=new c.Socket("".concat("https://vivalaakam-chat.herokuapp.com".replace(/^http/,"ws"),"/socket"),{params:{guardian_token:e}})}this._socket.connect()}},{key:"disconnect",value:function(){this._socket&&this._socket.disconnect()}},{key:"join",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._socket||this.connect();var n=this._socket.channel(e,t);return n.join(),this._connections.push(n),n}},{key:"leave",value:function(e){this._connections.length&&(this._connections=this._connections.filter(function(t){return t!==e}),this._connections.length||this.disconnect())}}]),e}();o.single=new o},35:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(10),s=(n(49),n(22)),o=n(39),u=n(3),i=n(31),l=n(26);function h(e){var t=6e4*e.getTimezoneOffset();return new Date(e-t).toISOString().slice(0,19).replace("T"," ")}var f=n(33);n.d(t,"c",function(){return E}),n.d(t,"a",function(){return A}),n.d(t,"b",function(){return P}),n.d(t,"d",function(){return M}),n.d(t,"e",function(){return W});var p=a.a.mark(M),d=a.a.mark(L),v=a.a.mark(B),b=a.a.mark(D),g=a.a.mark(N),O=a.a.mark(W),j={loaded:!1,loading:!1,can_load:!0},k=new i.a,m="CHAT_INIT",w="CHAT_LOAD",y="CHAT_RESET",x="CHAT_UPDATE",_="CHAT_UNMOUNT",S="CHAT_MESSAGE";function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case y:return Object(c.a)({},j,r);case x:return Object(c.a)({},e,r);default:return e}}Object(o.a)(m);var T,A=Object(o.a)(w),C=Object(o.a)(y),U=Object(o.a)(x),P=(Object(o.a)(_),Object(o.a)(S)),Q=function(e){return e.chat};function M(e){var t,n;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.payload,r.prev=1,!T){r.next=5;break}return r.next=5,Object(u.cancel)(T);case 5:return r.next=7,k.fetch(t);case 7:return n=r.sent,r.next=10,Object(u.put)(U(Object(c.a)({},n.data,{can_load:25===n.data.messages.length})));case 10:return r.next=12,Object(u.put)(Object(l.c)(n.data.messages));case 12:return r.next=14,Object(u.fork)(L,n.data.id);case 14:T=r.sent,r.next=20;break;case 17:r.prev=17,r.t0=r.catch(1),console.log("onChatInit",r.t0.message);case 20:case"end":return r.stop()}},p,this,[[1,17]])}function L(e){var t,n;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0,t=Object(s.eventChannel)(function(t){var n=f.a.single.join("chat:".concat(e),{});return n.on("on_message",t),function(){f.a.single.leave(n)}});case 2:return r.next=5,Object(u.take)(t);case 5:return n=r.sent,r.next=8,Object(u.put)(Object(l.d)([n]));case 8:return r.next=10,Object(u.put)(U({last_message:n}));case 10:r.next=2;break;case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),console.log("chatSubscribe",r.t0.message);case 17:return r.prev=17,t.close&&t.close(),r.finish(17);case 20:case"end":return r.stop()}},d,this,[[0,14,17,20]])}function B(e){var t,n;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(u.select)(Q);case 4:return n=r.sent,r.next=7,k.message(n.id,t.trim());case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),console.log("onChatMessage",r.t0.message);case 12:case"end":return r.stop()}},v,this,[[1,9]])}function D(){var e,t,n,r;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(u.put)(U({loading:!0}));case 3:return a.next=5,Object(u.select)(Q);case 5:return e=a.sent,a.next=8,Object(u.select)(l.b);case 8:return t=a.sent,n=t[0],a.next=12,k.messages(e.id,h(n.inserted_at));case 12:return r=a.sent,a.next=15,Object(u.put)(U({loading:!1,can_load:25===r.data.length,loaded:!0}));case 15:return a.next=17,Object(u.put)(Object(l.d)(r.data));case 17:a.next=22;break;case 19:a.prev=19,a.t0=a.catch(0),console.log("onChatLoad",a.t0.message);case 22:case"end":return a.stop()}},b,this,[[0,19]])}function N(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.put)(C({}));case 3:return e.next=5,Object(u.put)(Object(l.c)([]));case 5:if(!T){e.next=8;break}return e.next=8,Object(u.cancel)(T);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("onChatUnmount",e.t0.message);case 13:case"end":return e.stop()}},g,this,[[0,10]])}function W(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.fork)(u.takeLatest,m,M);case 2:return e.next=4,Object(u.fork)(u.takeLatest,w,D);case 4:return e.next=6,Object(u.fork)(u.takeLatest,_,N);case 6:return e.next=8,Object(u.fork)(u.takeLatest,S,B);case 8:case"end":return e.stop()}},O,this)}},36:function(e,t,n){"use strict";var r=n(10),a=n(2),c=n.n(a),s=n(39),o=n(15),u=n(3),i=n(6),l=n(7),h=n(12),f=n(11),p=n(13),d=n(37),v=n.n(d),b=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,"api/users"))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){return this.postQuery(this.getUrl(),e)}},{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getQuery(this.getUrl("",v.a.stringify({full:e})))}},{key:"list",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=v.a.stringify({users:e},{arrayFormat:"bracket"});return this.getQuery(this.getUrl("/list",t))}}]),t}(n(30).a),g=n(17),O=n(31),j=n(24);n.d(t,"a",function(){return A}),n.d(t,"c",function(){return U}),n.d(t,"b",function(){return P}),n.d(t,"d",function(){return M});var k=c.a.mark(P),m=c.a.mark(Q),w=c.a.mark(M),y=new b,x=new O.a,_=[],S="USERS_UPDATE",E="USERS_RESET",T="USERS_PRIVATE_CHAT";function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case E:return r;case S:return e.concat(r);default:return e}}Object(s.a)(S);var C=Object(s.a)(E),U=(Object(s.a)("USERS_FETCH"),Object(s.a)(T));function P(){var e,t,n;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(u.select)(g.c);case 3:return e=r.sent,r.next=6,y.all();case 6:return t=r.sent,n=t.data.filter(function(t){return t.id!==e.id}),r.next=10,Object(u.put)(C(n));case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),console.log("onUsersInit",r.t0.message);case 15:case"end":return r.stop()}},k,this,[[0,12]])}function Q(e){var t,n,a;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,c.next=4,Object(u.select)(g.c);case 4:return n=c.sent,c.next=7,x.create({chat:{name:"private",is_private:!0,users:[t.id,n.id]}});case 7:return a=c.sent,c.next=10,Object(u.put)(Object(o.g)("/chats/".concat(a.data.id)));case 10:return c.next=12,Object(u.put)(Object(j.a)(Object(r.a)({},a.data,{last:new Date})));case 12:c.next=17;break;case 14:c.prev=14,c.t0=c.catch(1),console.log("onUsersPrivateChat",c.t0.message);case 17:case"end":return c.stop()}},m,this,[[1,14]])}function M(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.fork)(u.takeLatest,T,Q);case 2:case"end":return e.stop()}},w,this)}},38:function(e,t,n){e.exports={Btn:"Btn_Btn___6Qbu",defaultScheme:"Btn_defaultScheme__2FZxQ",active:"Btn_active__1sQMl",inverted:"Btn_inverted__3hx0f",blueScheme:"Btn_blueScheme__1HpUY",greenScheme:"Btn_greenScheme__2wwnR",orangeScheme:"Btn_orangeScheme__eglMg",githubScheme:"Btn_githubScheme__3P5DQ",googleScheme:"Btn_googleScheme__gelXl",facebookScheme:"Btn_facebookScheme__3T4xQ"}},52:function(e,t,n){e.exports={Modal:"Modal_Modal__2Ff3a",wrapper:"Modal_wrapper__17Z-7"}},53:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(27),a=n(1),c=n.n(a),s=n(40),o=n.n(s),u=n(38),i=n.n(u);function l(e){var t,n=e.children,a=e.className,s=e.onClick,u=e.name,l=e.active,h=e.inverted,f=e.disabled,p=e.scheme,d=o()(i.a.Btn,i.a["".concat(p,"Scheme")],a,(t={},Object(r.a)(t,i.a.active,l),Object(r.a)(t,i.a.inverted,h),t));return c.a.createElement("button",Object.assign({className:d},{name:u,disabled:f,onClick:s}),n)}l.defaultProps={scheme:"default",name:"",className:"",disabled:!1,inverted:!1,active:!1}},60:function(e,t,n){"use strict";var r=n(6),a=n(7),c=n(12),s=n(11),o=n(13),u=n(1),i=n.n(u),l=n(111),h=n(112),f=n(61),p=n.n(f),d=n(21),v=n(29),b=n(46),g="undefined"!==typeof window&&n.n(b)()();function O(e){var t=e.store,n=e.children;return g?i.a.createElement(d.a,{store:t},i.a.createElement(v.ConnectedRouter,{history:g},n)):i.a.createElement(d.a,{store:t},n)}var j=function(){return i.a.createElement("div",null,"Loading")},k=n(67),m=n(10),w=n(25),y=n(63),x=n(22),_=n(39),S="UPDATE_STATE";function E(e){return function(t,n){switch(n.type){case S:return e(Object(m.a)({},t,n.payload),n);default:return e(t,n)}}}var T=Object(_.a)(S),A=n(26),C=n(36),U=n(24),P=n(17),Q=n(35);var M=n(2),L=n.n(M),B=n(3),D=n(64),N=L.a.mark(I),W={"/chats":L.a.mark(function e(){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.call)(C.b);case 2:case"end":return e.stop()}},e,this)}),"/chats/:chatId":L.a.mark(function e(t){var n;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.chatId,e.next=3,Object(B.call)(Q.d,{payload:n});case 3:case"end":return e.stop()}},e,this)})};function I(){var e;return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[Object(Q.e)(),Object(P.e)(),Object(U.c)(),Object(C.d)()],g&&e.unshift(Object(D.router)(g,W)),t.next=4,Object(B.fork)(B.all,e);case 4:case"end":return t.stop()}},N,this)}var R=n(65),H=n.n(R),z=Object(x.default)(),F=[y.a,z];var J=n(41),X=n.n(J),G=n(40),V=n.n(G),q=n(52),Z=n.n(q),K=document.getElementById("modal"),Y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).el=document.createElement("div"),n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){K.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){K.removeChild(this.el)}},{key:"render",value:function(){return X.a.createPortal(this.renderWrapper(),this.el)}},{key:"renderWrapper",value:function(){var e=V()(Z.a.wrapper,this.props.className);return i.a.createElement("div",{className:Z.a.Modal},i.a.createElement("div",{className:e},this.props.children))}}]),t}(u.PureComponent),$=n(66),ee=n.n($),te=n(53);var ne=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).onClickLogin=function(e){var t;e&&e.preventDefault(),(t="identity",new Promise(function(e){var n,r=document.body.offsetWidth,a=window.screenLeft+r/2-500,c=window.screenTop+100;window.addEventListener("message",function(t){t.data.id&&(e(t.data),n.close())},!1);var s="status=no,scrollbar=yes,resizable=yes,width=1000,height=800,top=".concat(c,",left=").concat(a);console.log("".concat("https://vivalaakam-chat.herokuapp.com","/auth/").concat(t)),n=window.open("".concat("https://vivalaakam-chat.herokuapp.com","/auth/").concat(t),"auth_popup",s)})).then(function(e){n.props.applyAuth(e)}).catch(function(e){console.log(e.message)})},n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return i.a.createElement(Y,{className:ee.a.Auth},i.a.createElement(te.a,{onClick:this.onClickLogin},"Login"))}}]),t}(u.PureComponent),re=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return this.props.user.id?null:i.a.createElement(ne,{applyAuth:this.props.applyAuth})}}]),t}(u.PureComponent),ae=Object(d.c)(function(e){return{user:e.user}},function(e){return{applyAuth:function(t){e(Object(P.d)(t))}}})(re),ce=n(110),se=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return i.a.createElement(ce.a,{to:"/chats"})}}]),t}(u.PureComponent),oe=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return i.a.createElement("p",null,"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0441\u0432\u043e\u0439 \u0441\u0442\u0440\u0430\u0445 \u0438 \u0440\u0438\u0441\u043a")}}]),t}(u.PureComponent);function ue(e){return p()({loader:e,loading:j,render:function(e,t){var n=e.default;return i.a.createElement(n,t)}})}n.d(t,"b",function(){return ue});var ie=ue(function(){return Promise.all([n.e(4),n.e(5)]).then(n.bind(null,149))}),le=function(e){var t=[].concat(F);if(g){var r=n(29);t.push(r.routerMiddleware(g))}var a=window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||w.d,c=Object(w.e)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E(Object(w.c)(Object(m.a)({router:Object(v.connectRouter)(e),user:P.b,chat:Q.c,chats:U.b,users:C.a,outer:E,messages:A.a},t)))}(g),{},a(w.a.apply(void 0,Object(k.a)(t)),H()(["user"])));return c.updateState=function(e){var t=Object.keys(c.getState()).reduce(function(t,n){return Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]),t},{});return c.dispatch(T(t))},c.runSaga=z.run,c.asyncReducers={},c.updateState(e),z.run(I),c}(window.__INITIAL_STATE__||{}),he=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return i.a.createElement(O,{store:le},i.a.createElement("div",{id:"inner"},i.a.createElement(ae,null),i.a.createElement(l.a,null,i.a.createElement(h.a,{exact:!0,path:"/",component:se}),i.a.createElement(h.a,{path:"/chats",component:ie}),i.a.createElement(h.a,{path:"/terms",component:oe}))))}}]),t}(u.Component);t.a=he},66:function(e,t,n){e.exports={Auth:"Auth_Auth__2lPSo"}},70:function(e,t,n){e.exports=n(109)},75:function(e,t,n){}},[[70,1,2]]]);
//# sourceMappingURL=main.365cf559.chunk.js.map