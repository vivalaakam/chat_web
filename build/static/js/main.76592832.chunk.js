(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(36),s=n.n(c),o=(n(71),n(54)),u=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(a.a.createElement(o.a,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");u?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):i(e)})}}()},15:function(e,t,n){"use strict";var r=n(3),a=n.n(r),c=n(14),s=n(63),o=n(4),u=n(24),i=n(17),l=n(6),f=n(9),h=n(11),p=n(10),d=n(12),v=new(function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).call(this,"api/subscription"))}return Object(d.a)(t,e),t}(n(27).a));function b(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}var g=function(){function e(){Object(l.a)(this,e),"undefined"!==typeof navigator&&"undefined"!==typeof window&&"serviceWorker"in navigator&&"PushManager"in window&&this.run()}return Object(f.a)(e,[{key:"run",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register("".concat("","/push-worker.js"));case 3:return this.serviceWorker=e.sent,e.next=6,this.serviceWorker.pushManager.getSubscription();case 6:t=e.sent,this.hasSubscription=!(null===t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Service Worker Error",e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"subscribeUser",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.serviceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.serviceWorker.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:b("BLd2VdjhaXtdzi791fq_BMXyc-qFc8wtcChM3JcvdNuvEfHk2pvc1PCZcMEkOG85klBRss3OejxHhWq7oXKypcM")});case 5:return t=e.sent,e.prev=6,e.next=9,v.create({subscription:{subscription:JSON.stringify(t),source:"web"}});case 9:return n=e.sent,this.hasSubscription=!0,e.abrupt("return",n);case 14:e.prev=14,e.t0=e.catch(6),this.hasSubscription=!1;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(2),console.log("Failed to subscribe the user: ",e.t1);case 22:case"end":return e.stop()}},e,this,[[2,19],[6,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"unsubscribeUser",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.serviceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.serviceWorker.pushManager.getSubscription();case 4:if(!(t=e.sent)){e.next=8;break}return this.hasSubscription=!1,e.abrupt("return",t.unsubscribe());case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();g.single=new g,n.d(t,"a",function(){return k}),n.d(t,"b",function(){return y}),n.d(t,"d",function(){return _}),n.d(t,"c",function(){return E}),n.d(t,"e",function(){return T});var O=a.a.mark(S),j=a.a.mark(T),m={loaded:!1},k="USER_UPDATE",w="USER_APPLY";function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case k:return Object(c.a)({},e,r);default:return e}}var x=Object(s.a)(k),_=Object(s.a)(w);function S(e){var t,n;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,u.a.setToken(t.token),r.next=5,g.single.subscribeUser();case 5:return(n=r.sent)&&localStorage.setItem("subscription",n.data.id),r.next=9,Object(o.put)(x(t));case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),console.log("userApplyAction",r.t0.message);case 14:case"end":return r.stop()}},O,this,[[1,11]])}function E(e){return e.user}function T(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.fork)(o.takeLatest,w,S);case 2:case"end":return e.stop()}},j,this)}},21:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return f}),n.d(t,"c",function(){return h});var r=n(14),a=n(63),c=[],s="MESSAGES_UPDATE",o="MESSAGES_RESET";function u(e,t){if(0===t.length)return e;for(var n=t.map(function(e){return Object(r.a)({},e,{inserted_at:new Date(e.inserted_at)})}),a=e.concat(n).sort(function(e,t){return e.inserted_at-t.inserted_at}),c=a.shift(),s=a.shift(),o=[c];a.length;)s.in_block=c.sender_id===s.sender_id,o.push(s),c=s,s=a.shift();return s&&o.push(s),o}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case o:return u(c,r);case s:return u(e,r);default:return e}}var l=function(e){return e.messages},f=Object(a.a)(s),h=Object(a.a)(o)},22:function(e,t,n){"use strict";var r=n(3),a=n.n(r),c=n(14),s=n(58),o=n(26),u=n(63),i=n(4),l=n(28),f=n(21),h=n(15);function p(e){var t=6e4*e.getTimezoneOffset();return new Date(e-t).toISOString().slice(0,19).replace("T"," ")}n.d(t,"d",function(){return T}),n.d(t,"a",function(){return U}),n.d(t,"c",function(){return P}),n.d(t,"b",function(){return Q}),n.d(t,"e",function(){return B}),n.d(t,"f",function(){return W});var d=a.a.mark(B),v=a.a.mark(L),b=a.a.mark(I),g=a.a.mark(N),O=a.a.mark(R),j=a.a.mark(W),m={loaded:!1,loading:!1,can_load:!0},k=new l.a,w="CHAT_INIT",y="CHAT_LOAD",x="CHAT_RESET",_="CHAT_UPDATE",S="CHAT_UNMOUNT",E="CHAT_MESSAGE";function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case x:return Object(c.a)({},m,r);case _:return Object(c.a)({},e,r);default:return e}}Object(u.a)(w);var A,U=Object(u.a)(y),C=Object(u.a)(x),P=Object(u.a)(_),Q=(Object(u.a)(S),Object(u.a)(E)),M=function(e){return e.chat};function B(e){var t,n,r;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.payload,a.prev=1,!A){a.next=5;break}return a.next=5,Object(i.cancel)(A);case 5:return a.next=7,k.fetch(t);case 7:return n=a.sent,a.next=10,Object(i.put)(P(Object(c.a)({},n.data,{can_load:25===n.data.messages.length})));case 10:return a.next=12,Object(i.put)(Object(f.c)(n.data.messages));case 12:return a.next=14,Object(i.select)(h.c);case 14:return r=a.sent,a.next=17,Object(i.fork)(L,n.data.id,r.token);case 17:A=a.sent,a.next=23;break;case 20:a.prev=20,a.t0=a.catch(1),console.log("onChatInit",a.t0.message);case 23:case"end":return a.stop()}},d,this,[[1,20]])}function L(e,t){var n,r;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0,n=Object(o.eventChannel)(function(n){var r=new s.Socket("".concat("undefined".replace(/^http/,"ws"),"/socket"),{params:{guardian_token:t}});r.connect();var a=r.channel("chat:".concat(e),{});return a.join(),a.on("on_message",n),function(){r.disconnect()}});case 2:return a.next=5,Object(i.take)(n);case 5:return r=a.sent,a.next=8,Object(i.put)(Object(f.d)([r]));case 8:return a.next=10,Object(i.put)(P({last_message:r}));case 10:a.next=2;break;case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log("chatSubscribe",a.t0.message);case 17:return a.prev=17,n.close&&n.close(),a.finish(17);case 20:case"end":return a.stop()}},v,this,[[0,14,17,20]])}function I(e){var t,n;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(i.select)(M);case 4:return n=r.sent,r.next=7,k.message(n.id,t.trim());case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),console.log("onChatMessage",r.t0.message);case 12:case"end":return r.stop()}},b,this,[[1,9]])}function N(){var e,t,n,r;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(i.put)(P({loading:!0}));case 3:return a.next=5,Object(i.select)(M);case 5:return e=a.sent,a.next=8,Object(i.select)(f.b);case 8:return t=a.sent,n=t[0],a.next=12,k.messages(e.id,p(n.inserted_at));case 12:return r=a.sent,a.next=15,Object(i.put)(P({loading:!1,can_load:25===r.data.length,loaded:!0}));case 15:return a.next=17,Object(i.put)(Object(f.d)(r.data));case 17:a.next=22;break;case 19:a.prev=19,a.t0=a.catch(0),console.log("onChatLoad",a.t0.message);case 22:case"end":return a.stop()}},g,this,[[0,19]])}function R(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.put)(C({}));case 3:return e.next=5,Object(i.put)(Object(f.c)([]));case 5:if(!A){e.next=8;break}return e.next=8,Object(i.cancel)(A);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("onChatUnmount",e.t0.message);case 13:case"end":return e.stop()}},O,this,[[0,10]])}function W(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.fork)(i.takeLatest,w,B);case 2:return e.next=4,Object(i.fork)(i.takeLatest,y,N);case 4:return e.next=6,Object(i.fork)(i.takeLatest,S,R);case 6:return e.next=8,Object(i.fork)(i.takeLatest,E,I);case 8:case"end":return e.stop()}},j,this)}},24:function(e,t,n){"use strict";var r="jwtToken";t.a={getToken:function(){return"undefined"!==typeof localStorage&&localStorage.getItem(r)},setToken:function(e){e&&(localStorage.setItem(r,e),document.cookie="Authorization=Bearer ".concat(e))},removeToken:function(){localStorage.setItem(r,null),document.cookie="Authorization="}}},27:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(14),a=n(3),c=n.n(a),s=n(17),o=n(6),u=n(9),i=n(24),l=function(){function e(t){var n=this;Object(o.a)(this,e),this.url="undefined",this.getUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"".concat(n.url,"/").concat(n.base_url).concat(e,"?").concat(t):"".concat(n.url,"/").concat(n.base_url).concat(e)},this.base_url=t}return Object(u.a)(e,[{key:"create",value:function(e){return this.postQuery("".concat(this.getUrl()),e)}},{key:"update",value:function(e,t){return this.putQuery("".concat(this.getUrl(),"/").concat(e),t)}},{key:"fetch",value:function(e){return this.getQuery("".concat(this.getUrl(),"/").concat(e))}},{key:"all",value:function(){return this.getQuery("".concat(this.getUrl()))}},{key:"remove",value:function(e){return this.deleteQuery("".concat(this.getUrl(),"/").concat(e))}},{key:"getQuery",value:function(){var t=Object(s.a)(c.a.mark(function t(n){var r,a,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.a.getToken(),t.next=3,fetch(n,this.options(r));case 3:return a=t.sent,s=e.afterQuery(a),t.abrupt("return",s.json());case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"postQuery",value:function(){var t=Object(s.a)(c.a.mark(function t(n,r){var a,s,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.a.getToken(),t.next=3,fetch(n,this.options(a,{method:"POST",body:JSON.stringify(r)}));case 3:return s=t.sent,o=e.afterQuery(s),t.abrupt("return",o.json());case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"putQuery",value:function(){var t=Object(s.a)(c.a.mark(function t(n,r){var a,s,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.a.getToken(),t.next=3,fetch(n,this.options(a,{method:"PUT",body:JSON.stringify(r)}));case 3:return s=t.sent,o=e.afterQuery(s),t.abrupt("return",o.json());case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"deleteQuery",value:function(){var t=Object(s.a)(c.a.mark(function t(n){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.a.getToken(),t.next=3,fetch(n,this.options(r,{method:"DELETE"}));case 3:return a=t.sent,e.afterQuery(a),t.abrupt("return",!0);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={Authorization:"Bearer ".concat(e),"Content-Type":"application/json"};return Object(r.a)({headers:n,mode:"cors",credentials:"include"},t)}}],[{key:"handleError",value:function(){var e=Object(s.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:throw n=e.sent,new Error(n.message);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"afterQuery",value:function(t){return t.ok?t:e.handleError(t)}}]),e}()},28:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(6),a=n(9),c=n(11),s=n(10),o=n(12),u=n(27),i=n(33),l=n.n(i),f=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).call(this,"api/chats"))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"messages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.getQuery(this.getUrl("/".concat(e,"/messages"),l.a.stringify({last_message:t})))}},{key:"message",value:function(e,t){return this.postQuery("".concat(this.getUrl(),"/").concat(e,"/message"),{message:{message:t}})}}]),t}(u.a)},34:function(e,t,n){e.exports={Btn:"Btn_Btn___6Qbu",defaultScheme:"Btn_defaultScheme__2FZxQ",active:"Btn_active__1sQMl",inverted:"Btn_inverted__3hx0f",blueScheme:"Btn_blueScheme__1HpUY",greenScheme:"Btn_greenScheme__2wwnR",orangeScheme:"Btn_orangeScheme__eglMg",githubScheme:"Btn_githubScheme__3P5DQ",googleScheme:"Btn_googleScheme__gelXl",facebookScheme:"Btn_facebookScheme__3T4xQ"}},46:function(e,t,n){e.exports={Modal:"Modal_Modal__2Ff3a",wrapper:"Modal_wrapper__17Z-7"}},53:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(23),a=n(1),c=n.n(a),s=n(35),o=n.n(s),u=n(34),i=n.n(u);function l(e){var t,n=e.children,a=e.className,s=e.onClick,u=e.name,l=e.active,f=e.inverted,h=e.disabled,p=e.scheme,d=o()(i.a.Btn,i.a["".concat(p,"Scheme")],a,(t={},Object(r.a)(t,i.a.active,l),Object(r.a)(t,i.a.inverted,f),t));return c.a.createElement("button",Object.assign({className:d},{name:u,disabled:h,onClick:s}),n)}l.defaultProps={scheme:"default",name:"",className:"",disabled:!1,inverted:!1,active:!1}},54:function(e,t,n){"use strict";var r=n(6),a=n(9),c=n(11),s=n(10),o=n(12),u=n(1),i=n.n(u),l=n(107),f=n(108),h=n(55),p=n.n(h),d=n(30),v=n(32),b=n(41),g="undefined"!==typeof window&&n.n(b)()();function O(e){var t=e.store,n=e.children;return g?i.a.createElement(d.a,{store:t},i.a.createElement(v.ConnectedRouter,{history:g,store:t},n)):i.a.createElement(d.a,{store:t},n)}var j=function(){return i.a.createElement("div",null,"Loading")},m=n(62),k=n(14),w=n(20),y=n(57),x=n(26),_=n(63),S="UPDATE_STATE";function E(e){return function(t,n){switch(n.type){case S:return e(Object(k.a)({},t,n.payload),n);default:return e(t,n)}}}var T=Object(_.a)(S),A=n(21),U=n(3),C=n.n(U),P=n(4),Q=n(33),M=n.n(Q),B=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).call(this,"api/users"))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"update",value:function(e){return this.postQuery(this.getUrl(),e)}},{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getQuery(this.getUrl("",M.a.stringify({full:e})))}},{key:"list",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=M.a.stringify({users:e},{arrayFormat:"bracket"});return this.getQuery(this.getUrl("/list",t))}}]),t}(n(27).a),L=n(15),I=n(28),N=n(22),R=C.a.mark(K),W=C.a.mark(Y),D=C.a.mark($),H=new B,F=new I.a,z=[],J="USERS_UPDATE",X="USERS_RESET",G="USERS_PRIVATE_CHAT",V="USERS_INIT";function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case X:return r;case J:return e.concat(r);default:return e}}Object(_.a)(J);var Z=Object(_.a)(X);Object(_.a)("USERS_FETCH"),Object(_.a)(G),Object(_.a)(V);function K(){var e,t,n;return C.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(P.select)(L.c);case 3:return e=r.sent,r.next=6,H.all();case 6:return t=r.sent,n=t.data.filter(function(t){return t.id!==e.id}),r.next=10,Object(P.put)(Z(n));case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),console.log("onUsersInit",r.t0.message);case 15:case"end":return r.stop()}},R,this,[[0,12]])}function Y(e){var t,n,r;return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.prev=1,a.next=4,Object(P.select)(L.c);case 4:return n=a.sent,a.next=7,F.create({chat:{name:"private",is_private:!0,users:[t.id,n.id]}});case 7:return r=a.sent,a.next=10,Object(P.put)(Object(N.c)(r.data));case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.log("onUsersPrivateChat",a.t0.message);case 15:case"end":return a.stop()}},W,this,[[1,12]])}function $(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.fork)(P.takeLatest,V,K);case 2:return e.next=4,Object(P.fork)(P.takeLatest,G,Y);case 4:case"end":return e.stop()}},D,this)}var ee=n(23),te=C.a.mark(le),ne=C.a.mark(fe),re=new I.a,ae=[],ce="CHATS_UPDATE",se="CHATS_RESET";function oe(e){return e.map(function(e){return Object(k.a)({},e,{last:e.last||new Date(e.last_message&&e.last_message.inserted_at||e.inserted_at)})}).sort(function(e,t){return t.last-e.last})}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case ce:return function(e,t){var n=e.reduce(function(e,t){return Object(k.a)({},e,Object(ee.a)({},t.id,t))},{});return n[t.id]=t,oe(Object.values(n))}(e,r);case se:return oe(r);default:return e}}var ie=Object(_.a)(se);Object(_.a)(ce);function le(){var e,t;return C.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(P.select)(L.c);case 3:if(e=n.sent,!e.token){n.next=13;break}return n.next=8,re.all();case 8:return t=n.sent,n.next=11,Object(P.put)(ie(t.data));case 11:n.next=15;break;case 13:return n.next=15,Object(P.put)(ie([]));case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),console.log("init",n.t0.message);case 20:case"end":return n.stop()}},te,this,[[0,17]])}function fe(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.fork)(le);case 2:return e.next=4,Object(P.fork)(P.takeLatest,L.a,le);case 4:case"end":return e.stop()}},ne,this)}var he=n(59),pe=C.a.mark(ve),de={"/chats/:chatId":C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.chatId,e.next=3,Object(P.call)(N.e,{payload:n});case 3:case"end":return e.stop()}},e,this)})};function ve(){var e;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[Object(N.f)(),Object(L.e)(),fe(),$()],g&&e.unshift(Object(he.router)(g,de)),t.next=4,Object(P.fork)(P.all,e);case 4:case"end":return t.stop()}},pe,this)}var be=n(60),ge=n.n(be),Oe=Object(x.default)(),je=[y.a,Oe];var me=n(36),ke=n.n(me),we=n(35),ye=n.n(we),xe=n(46),_e=n.n(xe),Se=document.getElementById("modal"),Ee=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).el=document.createElement("div"),n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){Se.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){Se.removeChild(this.el)}},{key:"render",value:function(){return ke.a.createPortal(this.renderWrapper(),this.el)}},{key:"renderWrapper",value:function(){var e=ye()(_e.a.wrapper,this.props.className);return i.a.createElement("div",{className:_e.a.Modal},i.a.createElement("div",{className:e},this.props.children))}}]),t}(u.PureComponent),Te=n(61),Ae=n.n(Te),Ue=n(53);var Ce=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).onClick=function(e){var t;e&&e.preventDefault(),(t="facebook",new Promise(function(e){var n,r=document.body.offsetWidth,a=window.screenLeft+r/2-500,c=window.screenTop+100;window.addEventListener("message",function(t){t.data.id&&(e(t.data),n.close())},!1);var s="status=no,scrollbar=yes,resizable=yes,width=1000,height=600,top=".concat(c,",left=").concat(a);console.log("".concat("undefined","/auth/").concat(t)),n=window.open("".concat("undefined","/auth/").concat(t),"auth_popup",s)})).then(function(e){n.props.applyAuth(e)}).catch(function(e){console.log(e.message)})},n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return i.a.createElement(Ee,{className:Ae.a.Auth},i.a.createElement(Ue.a,{onClick:this.onClick,scheme:"facebook"},"Login with Facebook"))}}]),t}(u.PureComponent),Pe=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return this.props.user.id?null:i.a.createElement(Ce,{applyAuth:this.props.applyAuth})}}]),t}(u.PureComponent),Qe=Object(d.b)(function(e){return{user:e.user}},function(e){return{applyAuth:function(t){e(Object(L.d)(t))}}})(Pe),Me=n(106),Be=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return i.a.createElement(Me.a,{to:"/chats"})}}]),t}(u.PureComponent),Le=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return i.a.createElement("p",null,"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0441\u0432\u043e\u0439 \u0441\u0442\u0440\u0430\u0445 \u0438 \u0440\u0438\u0441\u043a")}}]),t}(u.PureComponent);function Ie(e){return p()({loader:e,loading:j,render:function(e,t){var n=e.default;return i.a.createElement(n,t)}})}n.d(t,"b",function(){return Ie});var Ne=Ie(function(){return Promise.all([n.e(4),n.e(5)]).then(n.bind(null,143))}),Re=function(e){var t=[].concat(je);if(g){var r=n(32);t.push(r.routerMiddleware(g))}var a=window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||w.d,c=Object(w.e)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return E(Object(w.c)(Object(k.a)({routing:v.routerReducer,user:L.b,chat:N.d,chats:ue,users:q,outer:E,messages:A.a},e)))}(),{},a(w.a.apply(void 0,Object(m.a)(t)),ge()(["user"])));return c.updateState=function(e){var t=Object.keys(c.getState()).reduce(function(t,n){return Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]),t},{});return c.dispatch(T(t))},c.runSaga=Oe.run,c.asyncReducers={},c.updateState(e),Oe.run(ve),c}(window.__INITIAL_STATE__||{}),We=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return i.a.createElement(O,{store:Re},i.a.createElement("div",{id:"inner"},i.a.createElement(Qe,null),i.a.createElement(l.a,null,i.a.createElement(f.a,{exact:!0,path:"/",component:Be}),i.a.createElement(f.a,{path:"/chats",component:Ne}),i.a.createElement(f.a,{path:"/terms",component:Le}))))}}]),t}(u.Component);t.a=We},61:function(e,t,n){e.exports={Auth:"Auth_Auth__2lPSo"}},66:function(e,t,n){e.exports=n(105)},71:function(e,t,n){}},[[66,1,2]]]);
//# sourceMappingURL=main.76592832.chunk.js.map